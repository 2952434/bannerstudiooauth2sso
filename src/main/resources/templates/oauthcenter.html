<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>旗帜软件工作室授权中心</title>
    <link rel="stylesheet" href="../css/base.css">
    <link rel="shortcut icon" href="../img/favicon.ico" />
    <link rel="stylesheet" href="../css/center.css">
    <!-- 引入样式 -->
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
<!--    引入bootstrap-->
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/vue@2"></script>
    <!-- 引入组件库 -->
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script type="text/javascript" src="https://repo.bfw.wiki/bfwrepo/js/jquery-3.2.1.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body class="starlight">
<div id="app">
    <div class="header">
        <div class="logo"><img src="../img/favicon.ico" alt=""></div>
        <div class="text">旗帜软件工作室授权中心</div>
    </div>
    <div class="container">
        <div class="row bgc">
            <p>应用授权</p>
        </div>
        <div class="row">
<!--            <div th:if="${clientId} eq null">-->
<!--            <div class="content">{{client_id}} 应用请求授权,该应用将获取你以下信息:-->
<!--                <form action="/oauth/authorize" method="post">-->
<!--                    <input type="hidden" name="user_oauth_approval" value="true">-->
<!--                <p class="one">-->
<!--                    <input type="checkbox" name="scope.{{scope}}" id="all" style="width: 14px;height: 14px" value="true" checked><label for="all">全选</label>-->
<!--                </p>-->
<!--                <p>-->
<!--                    <input type="checkbox"  id="only" style="width: 14px;height: 14px" disabled checked><label for="only">昵称、头像、性别</label>-->
<!--                </p>-->
<!--                <div class="row last">-->
<!--                    <el-button type="primary" class="left" native-type="submit" name="authorize">快速安全登录</el-button>-->
<!--&lt;!&ndash;                    <button type="submit">快速安全登录</button>&ndash;&gt;-->
<!--                    <el-button type="info" @click="golast">返回登录页面</el-button>-->
<!--                </div>-->
<!--                </form>-->
<!--                <p class="end">授权后表明你已同意 <a href="javascript:;">旗帜软件工作室服务协议</a></p>-->
<!--                </div>-->
<!--            </div>-->
<!--            <div th:if="${clientId} eq null">&ndash;&gt;-->
                <div class="content">
                    <div th:text="${clientId}+'请求授权，该应用将获取你的以下信息'"></div>
                    <div th:text="'该用户具有'+${authority}+'角色'"></div>
<!--                    <div th:value="${userName}" v-model="userName"></div>-->
                    <div th:text="'该用户的用户名为'+${userName}+'用户名'" id="img" ></div>
                    <form action="/oauth/authorize" method="post">
                        <input type="hidden" name="user_oauth_approval" value="true">
                        <div th:each="item:${scopes}">
                        <p class="one">
                            <input type="checkbox" th:name="'scope.'+${item}" id="all" style="width: 14px;height: 14px" value="true" checked><label for="all">全选</label>
                        </p>
                        <p>
                            <input type="checkbox"  id="only" style="width: 14px;height: 14px" disabled checked><label for="only">昵称、头像、性别</label>
                        </p>
                        <div class="row last">
                            <el-button type="primary" class="left" native-type="submit" name="authorize">快速安全登录</el-button>
                            <!--                    <button type="submit">快速安全登录</button>-->
                            <el-button type="info" @click="golast">返回登录页面</el-button>
                        </div>
                    </form>
                    <p class="end">授权后表明你已同意 <a href="javascript:;">旗帜软件工作室服务协议</a></p>
                </div>
<!--            </div>-->


        </div>

    </div>
    <div class="banner">
        <ul>
            <li><a href="javascript:;">工作室官网</a></li>
            <li>|</li>
            <li><a href="javascript:;">意见反馈</a></li>
            <li>|</li>
            <li><a href="javascript:;">工作室面试</a></li>
            <li>|</li>
            <li><a href="javascript:;">工作室博客</a></li>
            <li>|</li>
            <li><a href="javascript:;">工作室论坛</a></li>
        </ul>
    </div>
</div>
<script>
    new Vue({
        el: '#app',
        data: function () {
            return {
                client_id: "",
                scope: "",
                userName: "",
                authority: "",
            }
        },
        methods: {
            golast() {
                window.location.href = '../login.html'
            },
        },
        mounted() {

        },
        created() {
           alert(document.getElementById("img").innerText)
            // var two=[[${userName}]]
            // // this.userName=two
            // alert(two)
            // function getQueryString(name) {
            //     let reg = `(^|&)${name}=([^&]*)(&|$)`
            //     let r = window.location.search.substr(1).match(reg);
            //     if (r != null)
            //         return unescape(r[2]);
            //     return null;
            // }
            // function getUrlKey(name,url){
            //     alert("111111")
            //     alert(decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(url) || [, ""])[1].replace(/\+/g, '%20')) || null)
            //     return decodeURIComponent((new RegExp('[?|&]' + name + '=' + '([^&;]+?)(&|#|;|$)').exec(url) || [, ""])[1].replace(/\+/g, '%20')) || null
            // }

            //     function GetUrlParam(paraName) {
            //         var url = document.location.toString();
            //         var arrObj = url.split("?");
            //
            //         if (arrObj.length > 1) {
            //             var arrPara = arrObj[1].split("&");
            //             var arr;
            //
            //             for (var i = 0; i < arrPara.length; i++) {
            //                 arr = arrPara[i].split("=");
            //
            //                 if (arr != null && arr[0] == paraName) {
            //                     return arr[1];
            //                 }
            //             }
            //             return "";
            //         }
            //         else {
            //             return "";
            //         }
            //     }
            //      this.client_id=GetUrlParam("client_id")
            //     this.scope=GetUrlParam("scope")
            //     this.userName=GetUrlParam("username")
            //     this.authority=GetUrlParam("authority")
            //
            // }
        }
    })
</script>
<script type="text/javascript" src="https://repo.bfw.wiki/bfwrepo/js/starlight.js"></script>
</body>
</html>